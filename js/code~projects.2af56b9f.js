(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["code~projects"],{"077d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{style:{maxHeight:"calc(100vh - 88px)"},attrs:{"align-content":"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8",md:"6"}},[t._v(" "),n("v-card",{attrs:{outlined:""}},[n("v-card-title",[t._v(" Projects "),n("v-spacer"),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{text:"",icon:""},on:{click:function(e){t.dialog=!0}}},i),[n("v-icon",[t._v("mdi-plus")])],1)]}}])},[n("span",[t._v("Create New Project")])])],1),t.projects.length?n("v-list",[n("v-divider"),t._l(t.projects,(function(e){return n("v-list-item",{key:e.uuid,class:t.currentProject&&e.uuid===t.currentProject.uuid?"primary--text":"",on:{click:Math.random}},[n("v-list-item-content",{on:{click:function(n){return t.setCurrentProject(e)}}},[n("v-list-item-title",[t._v(t._s(e.name))]),n("v-list-item-subtitle",[t._v(t._s(e.desc))])],1),t.currentProject&&t.currentProject.uuid===e.uuid?n("v-list-item-action",[n("v-chip",{attrs:{small:"",color:"primary",dark:""}},[t._v("Current")])],1):t._e(),t.projects.length>1&&(!t.currentProject||t.currentProject.uuid!==e.uuid)?n("v-list-item-action",[n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{icon:"",text:""}},i),[n("v-icon",[t._v("mdi-close")])],1)]}}],null,!0)},[n("v-list",[n("v-list-item",{on:{click:function(n){return t.removeProject(e)}}},[n("v-list-item-title",{staticClass:"error--text"},[n("v-icon",{attrs:{left:"",color:"error"}},[t._v("mdi-trash-can-outline")]),t._v(" Delete Project and Files ")],1)],1)],1)],1)],1):t._e(),n("v-list-item-action",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on;return[n("v-btn",t._g({attrs:{text:"",icon:""},on:{click:function(n){return t.editProject(e)}}},r),[n("v-icon",[t._v("mdi-pencil")])],1)]}}],null,!0)},[n("span",[t._v("Edit Project")])])],1)],1)}))],2):n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",depressed:""},on:{click:function(e){t.dialog=!0}}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Create A New Project ")],1),n("v-spacer")],1)],1),n("save-project",{attrs:{id:t.id},on:{input:function(e){!e&&t.reset()}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)],1)},r=[],a=n("1da1"),o=n("5530"),s=(n("96cf"),n("7db0"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("2f62")),l=n("94d0"),c={components:{SaveProject:l["a"]},data:function(){return{dialog:!1,id:null}},computed:Object(o["a"])(Object(o["a"])({},Object(s["b"])("projects",{projectFind:"find"})),{},{currentProject:function(){var t=this.$FeathersVuex.api.Project;return t.findInStore({query:{uuid:this.$store.getters.currentProject}}).data[0]||{}},projects:function(){return this.projectFind({query:{$limit:9999}}).data}}),methods:{setCurrentProject:function(t){this.$store.commit("setCurrentProject",t.uuid)},removeProject:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.$FeathersVuex.api.File,n.next=3,i.find({query:{projectId:t.uuid}});case 3:return r=n.sent,n.next=6,Promise.all(r.map((function(t){return t.remove()})));case 6:t.remove();case 7:case"end":return n.stop()}}),n)})))()},editProject:function(t){this.id=t._id,this.dialog=!0},reset:function(){this.id=null,this.dialog=!1}}},u=c,d=n("2877"),p=n("6544"),h=n.n(p),f=n("8336"),v=n("b0af"),m=n("99d9"),g=n("cc20"),b=n("62ad"),y=n("ce7e"),j=n("132d"),x=n("8860"),w=n("da13"),S=n("1800"),V=n("5d23"),_=n("e449"),k=n("0fd9"),P=n("2fa4"),I=n("3a2f"),z=Object(d["a"])(u,i,r,!1,null,null,null);e["a"]=z.exports;h()(z,{VBtn:f["a"],VCard:v["a"],VCardActions:m["a"],VCardTitle:m["c"],VChip:g["a"],VCol:b["a"],VDivider:y["a"],VIcon:j["a"],VList:x["a"],VListItem:w["a"],VListItemAction:S["a"],VListItemContent:V["a"],VListItemSubtitle:V["b"],VListItemTitle:V["c"],VMenu:_["a"],VRow:k["a"],VSpacer:P["a"],VTooltip:I["a"]})},1681:function(t,e,n){},2677:function(t,e,n){"use strict";var i=n("8654");e["a"]=i["a"]},5803:function(t,e,n){},8103:function(t,e,n){var i=n("d194"),r=i("toUpperCase");t.exports=r},"94d0":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[t._t("activator",null,{on:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[t._v(" "+t._s(null===t.id?"Create New":"Edit")+" Project ")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Project Name",hint:t.ref,outlined:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("v-textarea",{attrs:{label:"Project Description (optional)",outlined:""},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}}),t.importProject?n("v-file-input",{attrs:{rules:[function(t){return!t||/^application\/(x-)?zip/.test(t.type)||"File must be a .zip"}],"error-messages":[t.unzipError,t.inoError].filter((function(t){return t})),label:"Upload Project Zip",accept:".zip,application/zip,application/x-zip,application/x-zip-compressed",outlined:"","show-size":""},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}):t._e(),t.importProject?n("v-select",{attrs:{items:t.inoFiles,disabled:t.inoFiles.length<2,label:"Project File",outlined:""},model:{value:t.inoFile,callback:function(e){t.inoFile=e},expression:"inoFile"}}):t._e()],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:t.reset}},[t._v("Cancel")]),n("v-btn",{attrs:{disabled:!t.valid,loading:t.loading,color:"primary",depressed:""},on:{click:t.newProject}},[t._v(" "+t._s(null===t.id?"Create":"Save")+" ")])],1)],1)],1)},r=[],a=n("3835"),o=n("1da1"),s=n("5530"),l=(n("96cf"),n("a9e3"),n("498a"),n("b0c0"),n("99af"),n("4de4"),n("b64b"),n("5319"),n("ac1f"),n("1276"),n("caad"),n("2532"),n("7db0"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("2f62")),c=n("efdf"),u=n.n(c),d=n("e740"),p=n.n(d),h='/*\n  Blink\n\n  Turns an LED on for one second, then off for one second, repeatedly.\n\n  Most Arduinos have an on-board LED you can control. On the UNO, MEGA and ZERO\n  it is attached to digital pin 13, on MKR1000 on pin 6. LED_BUILTIN is set to\n  the correct LED pin independent of which board is used.\n  If you want to know what pin the on-board LED is connected to on your Arduino\n  model, check the Technical Specs of your board at:\n  https://www.arduino.cc/en/Main/Products\n\n  modified 8 May 2014\n  by Scott Fitzgerald\n  modified 2 Sep 2016\n  by Arturo Guadalupi\n  modified 8 Sep 2016\n  by Colby Newman\n\n  This example code is in the public domain.\n\n  http://www.arduino.cc/en/Tutorial/Blink\n*/\n\n// the setup function runs once when you press reset or power the board\nvoid setup() {\n  // initialize digital pin LED_BUILTIN as an output.\n  pinMode(LED_BUILTIN, OUTPUT);\n  Serial.begin(115200);\n}\n\n// the loop function runs over and over again forever\nvoid loop() {\n  digitalWrite(LED_BUILTIN, HIGH);   // turn the LED on (HIGH is the voltage level)\n  Serial.println("High");\n  delay(1000);                       // wait for a second\n  digitalWrite(LED_BUILTIN, LOW);    // turn the LED off by making the voltage LOW\n  Serial.println("Low");\n  delay(1000);                       // wait for a second\n}',f={props:{value:{type:Boolean,default:!1},importProject:{type:Boolean,default:!1},id:{type:[Number,String,null],default:null}},data:function(){return{dialog:this.value,loading:!1,name:"",desc:"",file:null,unzipped:{},unzipError:"",inoFile:null}},computed:Object(s["a"])(Object(s["a"])({},Object(l["b"])("projects",{projectFind:"find",projectGet:"get"})),{},{ref:function(){if(!this.name.trim())return"";var t=u()(this.name),e=1;while(this.projectFind({query:{ref:t,_id:{$ne:this.id}}}).total)e+=1,t="".concat(u()(this.name),"_").concat(e);return t},inoFiles:function(){return Object.keys(this.unzipped).filter((function(t){return/\.ino$/.test(t)}))},inoError:function(){return Object.keys(this.unzipped).length&&!this.inoFiles.length?"Invalid project file, no .ino files found.":""},valid:function(){return!!this.name.trim()&&(!this.importProject||/^application\/(x-)?zip/.test(this.file.type))&&!this.unzipError&&!this.inoError}}),mounted:function(){this.editProject()},watch:{id:function(t,e){t!==e&&this.editProject()},value:function(t,e){t!==e&&t!==this.dialog&&(this.dialog=t)},dialog:function(t,e){t!==e&&t!==this.value&&this.$emit("input",t)},file:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return e.name||(e.name=p()(t.name.split("/").pop().replace(/\.[^.]+$/,""))),e.unzipError="",n.prev=4,n.next=7,e.$bundler.unzipFile(t);case 7:e.unzipped=n.sent,Object.keys(e.unzipped).length||(e.unzipError="Invalid Zip File. Zip appears empty."),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](4),console.error(n.t0),e.unzipError="Invalid Zip File. Unable to unzip the file.";case 15:case"end":return n.stop()}}),n,null,[[4,11]])})))()},inoFiles:function(t,e){if(JSON.stringify(t)!==JSON.stringify(e)&&(!this.inoFile||!t.includes(this.inoFile))){var n=Object(a["a"])(t,1);this.inoFile=n[0]}}},methods:{setCurrentProject:function(t){this.$store.commit("setCurrentProject",t.uuid)},editProject:function(){this.id;var t=this.projectGet(this.id);t&&(this.name=t.name,this.desc=t.desc)},reset:function(){null===this.id&&(this.name="",this.desc=""),this.file=null,this.unzipped={},this.inoFile=null,this.dialog=!1},newProject:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,r,a,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.valid){e.next=2;break}return e.abrupt("return");case 2:return n=t.$FeathersVuex.api,i=n.Project,r=n.File,t.loading=!0,a=new i(Object(s["a"])({name:t.name.trim(),desc:t.desc,ref:t.ref},t.id?{_id:t.id}:{})),e.next=7,a.save();case 7:if(a=e.sent,!t.importProject){e.next=14;break}return e.next=11,t.$bundler.importProjectFiles(a,t.unzipped,t.inoFile);case 11:t.setCurrentProject(a),e.next=26;break;case 14:if(null!==t.id){e.next=21;break}return l=new r({name:"".concat(a.ref,".ino"),ref:"".concat(a.ref,"/").concat(a.ref,".ino"),body:h,contentType:"text/x-arduino",main:!0,projectId:a.uuid}),e.next=18,l.save();case 18:t.setCurrentProject(a),e.next=26;break;case 21:return e.next=23,r.find({query:{projectId:a.uuid}});case 23:return c=e.sent,e.next=26,Promise.all(c.map(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.main?(e.name="".concat(a.ref,".ino"),e.ref="".concat(a.ref,"/").concat(a.ref,".ino")):e.ref="".concat(a.ref,"/").concat(e.ref.replace(/^[^/]*\//,"")),e.save();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 26:t.loading=!1,t.reset();case 28:case"end":return e.stop()}}),e)})))()}}},v=f,m=n("2877"),g=n("6544"),b=n.n(g),y=n("8336"),j=n("b0af"),x=n("99d9"),w=n("169a"),S=(n("5803"),n("2677")),V=n("cc20"),_=n("80d2"),k=n("d9bd"),P=n("d9f7"),I=S["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>Object(_["H"])(t).every(t=>null!=t&&"object"===typeof t)}},computed:{classes(){return{...S["a"].options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.isMultiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce((t,{size:e=0})=>t+e,0);return this.$vuetify.lang.t(this.counterSizeString,t,Object(_["x"])(e,1024===this.base))},internalArrayValue(){return Object(_["H"])(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},isMultiple(){return this.$attrs.hasOwnProperty("multiple")},text(){return this.isDirty||!this.isFocused&&this.hasLabel?this.internalArrayValue.map(t=>{const{name:e="",size:n=0}=t,i=this.truncateText(e);return this.showSize?`${i} (${Object(_["x"])(n,1024===this.base)})`:i}):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&Object(k["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.isMultiple?t:t?[t]:[];Object(_["k"])(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.isMultiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map((t,e)=>this.$createElement(V["a"],{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t])):[]},genControl(){const t=S["a"].options.methods.genControl.call(this);return this.hideInput&&(t.data.style=Object(P["c"])(t.data.style,{display:"none"})),t},genInput(){const t=S["a"].options.methods.genInput.call(this);return delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",()=>{this.$refs.input.click()});return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((e,n)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[n],file:e,index:n}))}):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=S["a"].options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:()=>this.$refs.input.click()},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.isMultiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}}),z=n("b974"),$=n("2fa4"),C=n("8654"),F=(n("1681"),n("58df"));const O=Object(F["a"])(C["a"]);var L=O.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...C["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,n=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(n,e)+"px"},genInput(){const t=C["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){C["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),E=Object(m["a"])(v,i,r,!1,null,null,null);e["a"]=E.exports;b()(E,{VBtn:y["a"],VCard:j["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VDialog:w["a"],VFileInput:I,VSelect:z["a"],VSpacer:$["a"],VTextField:C["a"],VTextarea:L})},d194:function(t,e,n){var i=n("c32f"),r=n("aaec"),a=n("126d"),o=n("76dd");function s(t){return function(e){e=o(e);var n=r(e)?a(e):void 0,s=n?n[0]:e.charAt(0),l=n?i(n,1).join(""):e.slice(1);return s[t]()+l}}t.exports=s},e740:function(t,e,n){var i=n("b20a"),r=n("8103"),a=i((function(t,e,n){return t+(n?" ":"")+r(e)}));t.exports=a}}]);
//# sourceMappingURL=code~projects.2af56b9f.js.map